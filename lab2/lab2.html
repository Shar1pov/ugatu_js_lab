<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Шарипов И.Р. ПИ-322</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" />
	<link rel="stylesheet" href="../style.css">

	<script src="../jquery.js"></script>
</head>

<body>
	<div class="wrapper">
		<div class="container">
			<div class="pb-4 text-center border-bottom">
				<h2 class="fw-bold">Шарипов Ильян Рустемович</h1>
					<h3 class="mt-3 pb-3">Группа ПИ-322
				</h2>
				<a href="https://github.com/Shar1pov/ugatu_js_lab" target="_blank"
					class="btn btn-primary btn-sm px-4 me-sm-3">
					Ссылка на репозиторий GitHub
				</a>
				<a href="/lab2" class="btn btn-outline-secondary btn-sm px-4">Все задания</a>
			</div>

			<div class="py-5 border-bottom">
				<p class="fw-bold">Задание №2</p>

				<form class="row g-3 mt-3" id="taskform" method="post" action="#">
					<div class="col-md-4">
						<label for="name" class="form-label">Ваше имя</label>
						<input type="text" class="form-control" id="name">
					</div>
					<div class="col-md-4">
						<label for="pass" class="form-label">Пароль</label>
						<input type="password" class="form-control" id="pass">
					</div>
					<div class="col-md-4">
						<label for="passRepeat" class="form-label">Подтверждение пароля</label>
						<input type="password" class="form-control" id="passRepeat">
					</div>
					<div class="col-md-6">
						<label for="email" class="form-label">Email</label>
						<input type="email" class="form-control" id="email">
					</div>
					<div class="col-md-6">
						<label for="subject" class="form-label">Тема сообщения</label>
						<input type="text" class="form-control" id="subject">
					</div>
					<div class="col-md-12">
						<label for="message" class="form-label">Сообщение</label>
						<textarea class="form-control" id="message" rows="3" name="message"></textarea>
					</div>
					<div class="col-12">
						<button type="submit" class="btn btn-primary">Отправить</button>
						<button type="reset" class="btn btn-secondary ">Очистить</button>
					</div>
				</form>

			</div>
			<a href="lab1.html" class="btn btn-outline-secondary btn-sm mt-3">Предыдущее задание</a>
			<a href="lab3.html" class="btn btn-outline-primary btn-sm mt-3">Следующее задание</a>
		</div>
	</div>


	<script>
		$(document).ready(function () {
			let correctName, correctEmail, correctSubject, correctMessage, correctPass, correctPassRepeat;

			$('#taskform').submit(function (e) {
				e.preventDefault();
				let name = $('#name').val();
				let pass = $('#pass').val();
				let passRepeat = $('#passRepeat').val();
				let email = $('#email').val();
				let subject = $('#subject').val();
				let message = $('#message').val();

				$(".errorText").remove();

				if (name.length < 1) {
					$('#name').after('<span class="errorText">Это поле является обязательным</span>').css('border', '1px solid #ff0000');
				} else {
					$('#name').css('border', '1px solid #ced4da');
					correctName = true;
				}

				if (subject.length < 1) {
					$('#subject').after('<span class="errorText">Это поле является обязательным</span>').css('border', '1px solid #ff0000');
				} else {
					$('#subject').css('border', '1px solid #ced4da');
					correctSubject = true;
				}

				if (message.length < 10) {
					$('#message').after('<span class="errorText">Сообщение должно содержать более 10 символов</span>').css('border', '1px solid #ff0000');
				} else {
					$('#message').css('border', '1px solid #ced4da');
					correctMessage = true;
				}

				if (email.length < 1) {
					$('#email').after('<span class="errorText">Это поле является обязательным</span>').css('border', '1px solid #ff0000');
				} else {
					let regEx = /^[^ ]+@[^ ]+\.[a-z]{2,3}$/;
					let validEmail = regEx.test(email);
					if (!validEmail) {
						$('#email').after('<span class="errorText">Некорректный Email адрес</span>').css('border', '1px solid #ff0000');
					} else {
						$('#email').css('border', '1px solid #ced4da');
						correctEmail = true;
					}
				}

				if (pass.length < 4) {
					$('#pass').after('<span class="errorText">Пароль должен содержать более 4 символов</span>').css('border', '1px solid #ff0000');
				} else {
					$('#pass').css('border', '1px solid #ced4da');
					correctPass = true;
				}

				if (passRepeat != pass) {
					$('#passRepeat').after('<span class="errorText">Пароль не совпадает</span>').css('border', '1px solid #ff0000');
				} else {
					$('#passRepeat').css('border', '1px solid #ced4da');
					correctPassRepeat = true;
				}

				if (correctName == true && correctEmail == true && correctSubject == true && correctMessage == true && correctPass == true && correctPassRepeat == true) {
					$("form").unbind('submit').submit();
				}
			});
		});
	</script>

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
		crossorigin="anonymous"></script>

</body>

</html>